<!DOCTYPE html>
<html class="no-js" lang="en">
 <head>
  <meta charset="utf-8"/>
  <link href="/assets/bmp/newnav/newnav-css/style.css?1705813296" rel="stylesheet"/>
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QVB3G9YQBJ">
  </script>
  <script>
   window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QVB3G9YQBJ',{
  cookie_domain: 'bursamarketplace.com',
  cookie_flags: 'SameSite=Strict;Secure',
});
  </script>
  <script>
   (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-54BXS74');
  </script>
  <meta content="app-id=977732382" name="apple-itunes-app"/>
  <meta content="app-id=com.app.bursa.market.place&amp;hl=en" name="google-play-app"/>
  <meta content="App" name="msApplication-ID">
   <meta content="https://lh3.googleusercontent.com/qaNO8OfzpG4OBmNfLBsGKKwkQHEkqebmIAh66xZKg25vXP5bWP_W5a9t1SLbds0pQQ8=s180-rw" name="msapplication-TileImage">
    <meta content="ie=10" http-equiv="x-ua-compatible"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="noarchive" name="robots">
     <link href="/css/foundation.css" rel="stylesheet"/>
     <link href="/css/common.css" rel="stylesheet"/>
     <link href="/css/common_v2.css" rel="stylesheet"/>
     <link href="/css/mymkt.css" rel="stylesheet"/>
     <link href="/css/font.css" rel="stylesheet"/>
     <link href="/css/more.css" rel="stylesheet"/>
     <link href="/css/custom_v2.css" rel="stylesheet"/>
     <link href="/css/slide-menu.css" rel="stylesheet"/>
     <link href="/plugin/tipso/tipso.css" rel="stylesheet"/>
     <link href="/css/foundation-icons/foundation-icons.css" rel="stylesheet"/>
     <link href="/assets/bmp/reskin_v2/header/header_reskin_v2.css" rel="stylesheet"/>
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
     <link href="/n-favico/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"/>
     <link href="/n-favico/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"/>
     <link href="/n-favico/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/>
     <link href="/n-favico/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"/>
     <link href="/n-favico/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/>
     <link href="/n-favico/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"/>
     <link href="/n-favico/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"/>
     <link href="/n-favico/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"/>
     <link href="/n-favico/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/>
     <link href="/n-favico/android-icon-192x192.png" rel="icon" sizes="192x192" type="image/png"/>
     <link href="/n-favico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
     <link href="/n-favico/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
     <link href="/n-favico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
     <link href="/n-favico/manifest.json" rel="manifest"/>
     <meta content="#ffffff" name="msapplication-TileColor"/>
     <meta content="/n-favico/ms-icon-144x144.png" name="msapplication-TileImage"/>
     <meta content="#ffffff" name="theme-color"/>
     <link href="/n-favico/favicon.ico" rel="icon" type="image/x-icon"/>
     <title>
      BursaMKTPLC: Stocks
     </title>
     <meta content="listing, ipo, stock listing, PLC, stock price, market update" name="keywords"/>
     <meta content="View the complete list of all stocks that's listed on Bursa Malaysia, with live price updates." name="description"/>
     <script>
      window.onload = function () { 
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '682907011858844'); // Insert your pixel ID here.
    fbq('track', 'PageView');
}
     </script>
     <noscript>
      <img alt="" height="1" src="https://www.facebook.com/tr?id=682907011858844&amp;ev=PageView&amp;noscript=1" style="display:none" width="1"/>
     </noscript>
     <link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" rel="stylesheet"/>
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
     <script src="/js/vendor/jquery.min/jquery.min.js">
     </script>
    </meta>
   </meta>
  </meta>
 </head>
 <body style="background-color:transparent;height:auto">
  <style>
   .errmsg {
   padding: 20px 10px; 
    border: solid 1px #ea4335;
   margin: 15px 0px; 
   color: #ea4335; 
    text-align: center;    
}
.sucmsg {
   padding: 20px 10px;
    border: solid 1px #37b34a;
   margin: 15px 0px;
   color:#37b34a;
    text-align: center;
}
  </style>
  <div id="newnav">
   <div class="newnav-site-background">
    <div class="newnav-site-container">
     <div class="newnav-site-item newnav-mobile" id="newnav-logo" onclick="window.open('https://www.bursamalaysia.com','_self')">
      <img alt="" src="/assets/bmp/newnav/newnav-img/bmb-logo.png"/>
     </div>
     <div class="newnav-site-item" id="newnav-bmb" onclick="window.open('https://www.bursamalaysia.com/','_self')">
      Bursa Malaysia
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-1)">
      </div>
     </div>
     <div class="newnav-site-item is-active" id="newnav-bmp" onclick="window.open('/index.php','_self')">
      Bursa Marketplace
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-2)">
      </div>
     </div>
     <div class="newnav-site-item" id="newnav-banywhere" onclick="window.open('/anywhere','_self')">
      Bursa Anywhere
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-3)">
      </div>
     </div>
     <div class="newnav-site-item" id="newnav-bacademy" onclick="window.open('https://bursaacademy.bursamarketplace.com/en/home','_self')">
      Bursa Academy
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-4)">
      </div>
     </div>
     <div class="newnav-site-item" id="newnav-bsus" onclick="window.open('https://bursasustain.bursamalaysia.com/','_self')">
      Bursa Sustain
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-5)">
      </div>
     </div>
     <div class="newnav-site-item" id="newnav-contact" onclick="window.open('https://bursa2u.bursamalaysia.com/','_self')">
      Bursa 2U
      <div class="newnav-site-arrow" style="border-bottom-color: var(--gradient-7)">
      </div>
     </div>
     <div class="newnav-site-item newnav-mobile newnav-nofull" id="newnav-mobileLang">
      EN
     </div>
     <div class="newnav-site-item newnav-mobile newnav-nofull" id="newnav-mobileSearch">
      <i class="fas fa-search">
      </i>
     </div>
     <div class="newnav-site-item newnav-mobile newnav-nofull" id="newnav-hamburger">
      <i class="fas fa-bars">
      </i>
     </div>
     <div class="newnav-site-item newnav-mobile newnav-nofull" id="newnav-dot">
      <i class="fas fa-ellipsis-v">
      </i>
      <i class="fas fa-ellipsis-v">
      </i>
      <i class="fas fa-ellipsis-v">
      </i>
     </div>
    </div>
   </div>
   <div class="newnav-background">
    <div class="newnav-container">
     <div class="newnav-left">
      <div class="newnav-item">
       <div class="newnav-sub-text">
        <a style="color:white;text-decoration:none;">
         Tools
        </a>
        <i class="fas fa-sort-down">
        </i>
        <div class="newnav-sub-arrow">
        </div>
       </div>
       <div class="newnav-sub-container">
        <div class="newnav-sub-column">
         <div class="newnav-sub-item">
          <a href="/burmon">
           Burmon Trader
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mlt">
           Mirror, Learn &amp; Trade (MLT)
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/broadcast">
           Bursa Broadcast
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/dts">
           Derivatives Trading Simulator
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/partner-content">
           Content Partnerships
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/tools/screener">
           Screener
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/tools/alphaindicator">
           Stock Rating
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/tools/heatmap_stocks">
           What's Trending
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/tools/research">
           Research Reports
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/partners/brokers">
           List of Brokers
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/tools/news">
           News
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/bcr">
           #BursaClassroom
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/learn/glossary">
           Glossary
          </a>
         </div>
        </div>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-sub-text">
        <a style="color:white;text-decoration:none;">
         Share Market
        </a>
        <i class="fas fa-sort-down">
        </i>
        <div class="newnav-sub-arrow">
        </div>
       </div>
       <div class="newnav-sub-container">
        <div class="newnav-sub-column">
         <div class="newnav-sub-item">
          <a href="/mkt/themarket">
           Overview
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/stock">
           Shares
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/etf">
           ETFs
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/reit">
           REITs
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/warrants">
           Warrants
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/fixedincome_iculs">
           Fixed Income
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/leap">
           LEAP
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/mkt/gettingstarted/leap">
           Start LEAP
          </a>
         </div>
        </div>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-sub-text">
        <a style="color:white;text-decoration:none;">
         Derivatives Market
        </a>
        <i class="fas fa-sort-down">
        </i>
        <div class="newnav-sub-arrow">
        </div>
       </div>
       <div class="newnav-sub-container">
        <div class="newnav-sub-column">
         <div class="newnav-sub-item">
          <a href="/mkt/themarket/futures">
           Futures Overview
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/fm70/">
           FM70
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/ssf">
           SSF
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/fgld">
           FGLD
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/dvtc/">
           Derivatives Virtual Trading Challenge
          </a>
         </div>
         <div class="newnav-sub-item">
          <a href="/ftap/">
           Futures Trading Apprenticeship Programmes (FTAP)
          </a>
         </div>
        </div>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-sub-text">
        <a href="/mkt/digitalresearch/moneymarket" rel="noopener noreferrer" style="color:white;text-decoration:none;">
         Digital Research
        </a>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-sub-text">
        <a href="/mkt/fund/index" rel="noopener noreferrer" style="color:white;text-decoration:none;">
         Fund Platform
        </a>
       </div>
      </div>
     </div>
     <div class="newnav-pad">
     </div>
     <div class="newnav-right" style="flex-wrap:wrap">
      <div class="newnav-item newnav-mobile">
       <div class="newnav-button" id="navbar-trade" onclick="window.open('/mkt/opentradingaccount')">
        Open a Trading Account
        <i class="fas fa-chart-line">
        </i>
       </div>
      </div>
      <div class="newnav-item newnav-mobile" id="newnav-register">
       <div class="newnav-button" onclick="btnLogin('/');ShowLogin();ChangeLogin(1)">
        Register
        <i class="fas fa-user">
        </i>
       </div>
      </div>
      <div class="newnav-item newnav-mobile" id="newnav-login">
       <div class="newnav-button" onclick="btnLogin('/mkt/dashboard/profile');ShowLogin();ChangeLogin(0)">
        Login
        <i class="fas fa-lock">
        </i>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-button newnav-round" id="newnav-shariah" onclick="ToggleActive(this);ToggleShariahText(this);">
        <i class="fas fa-moon">
        </i>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-button newnav-round" id="newnav-search">
        <i class="fas fa-search">
        </i>
       </div>
      </div>
      <div class="newnav-item">
       <div class="newnav-button newnav-round" id="newnav-lang">
        EN
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="newnav-subsite-background newnav-nofull">
    <div class="newnav-subsite-container">
     <div class="newnav-subsite-item" onclick="window.open('https://www.bursamalaysia.com/','_self')">
      <img alt="Bursa Malaysia Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/bursa.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa Malaysia
       </strong>
      </div>
     </div>
     <div class="newnav-subsite-item" onclick="window.open('/index.php', '_self')">
      <img alt="Bursa Marketplace Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/marketplace.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa Marketplace
       </strong>
      </div>
     </div>
     <div class="newnav-subsite-item" onclick="window.open('https://www.bursamarketplace.com/anywhere/','_self')">
      <img alt="Bursa Anywhere Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/anywhere.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa Anywhere
       </strong>
      </div>
     </div>
     <div class="newnav-subsite-item" onclick="window.open('https://bursaacademy.bursamarketplace.com/en/home','_self')">
      <img alt="Bursa Academy Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/academy.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa Academy
       </strong>
      </div>
     </div>
     <div class="newnav-subsite-item" onclick="window.open('https://bursasustain.bursamalaysia.com/','_self')">
      <img alt="Bursa Sustain Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/sustain.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa Sustain
       </strong>
      </div>
     </div>
     <div class="newnav-subsite-item" onclick="window.open('https://bursa2u.bursamalaysia.com/','_self')">
      <img alt="Contact Us Icon" class="newnav-subsite-img" src="/assets/bmp/newnav/newnav-img/site-icons/contact.png"/>
      <div class="newnav-subsite-name">
       <strong>
        Bursa 2U
       </strong>
      </div>
     </div>
    </div>
   </div>
   <div class="newnav-subsub-background">
    <style type="text/css">
     .newnav-searchresult-container {
    max-width: 1200px;
    padding: 0px 2%;
    height:auto;
    text-align: center;
    position:relative;
    margin: 15px auto;
}

.searchpopbox {
    /*padding:10px; */
    background-color:#FFFFFF; 
    max-height: 300px;
    overflow-y: scroll;
    /*overflow-y: hidden;*/
    width: 100%;
    font-family:"Trebuchet MS", "Arial", sans-serif;
    position:sticky;
    transform-origin: center center;
    transition: all 0.5s;
}

.searchpopbox a {
    color:#3c3c3c; 
    text-decoration: none;
    font-size: 15px;
    font-weight: 300;
}

.searchpopbox a:hover {
    color:#000000; 
}

.highlight_row {
    background-color: #67205e !important;
}

.highlight_row > td > a {
    color:  white;
}

.hidden {
    display:none;
}
    </style>
    <div class="newnav-search-container">
     <input class="input-element form-control form-rounded rounded-pill" id="newnav-search-input" name="newnav-search-input" onkeyup="lookupSearch(this.value)" placeholder="Find a Quote or Search Keyword" type="text"/>
     <button id="newnav-search-close">
      <i class="fas fa-times">
      </i>
     </button>
    </div>
    <div id="search_suggestions" name="search_suggestions">
    </div>
    <script>
     $(function() {
    const UP = 38;
    const DOWN = 40;
    const ARROWS = [UP, DOWN];
    const HIGHLIGHT = 'highlight_row';

    let $table = $('.child-div');
    var pressed = false;
    var scrolled = 0;

    $('#newnav-search-input').on('input keydown', function(e) {
        
        $table = $('#myTable');
        let key = e.which;

        if (ARROWS.includes(key)) {

            let selectedRow = -1; 
            let $rows = $table.find('tbody tr');

            $rows.each(function(i, row) {
                if ($(row).hasClass(HIGHLIGHT)) {
                    selectedRow = i;
                }
            });
    
            if (key == UP && selectedRow > 0) {
                $rows.removeClass(HIGHLIGHT);
                $rows.eq(selectedRow - 1).addClass(HIGHLIGHT);
            } 
            else if (key == DOWN && selectedRow < $rows.length - 1) {
                $rows.removeClass(HIGHLIGHT);
                $rows.eq(selectedRow + 1).addClass(HIGHLIGHT);
            }    

            /* scrolling effect when highlight item go down/up */
            if (key == UP || key == DOWN) {
                var $container = $("#searchpopbox");
                var $scrollTo = $('.'+HIGHLIGHT);
                var $position = $scrollTo.offset().top - $container.offset().top + $container.scrollTop();
                if(($position > 120 && key == DOWN) || (key == UP)) {
                    $container.animate({scrollTop: $position - 120, scrollLeft: 0},0); 
                }
            }

            /* this happen when press enter on highlighted item */
            $(".input-element").on('keyup',function(e) {
                if(e.which == 13 && pressed == false) {

                    let $rows = $table.find('tbody tr'); 
                    $rows.each(function(i, row) {
                        if ($(row).hasClass(HIGHLIGHT)) {
                            window.location = $(row).children().children().attr('href');
                        }
                    });

                    pressed = true;
                    setTimeout(function() {
                        pressed = false;
                    }, 500);
                }
            });
        }
        
    }); 
});
    </script>
    <div class="newnav-lang-container">
     <div class="newnav-lang-button" id="newnav-lang-en">
      English
     </div>
     <div class="newnav-lang-button" id="newnav-lang-bm">
      Bahasa Malaysia
     </div>
    </div>
   </div>
  </div>
  <script src="https://www.google.com/recaptcha/api.js">
  </script>
  <div id="newpopup">
   <div id="newpopup-blackout">
   </div>
   <div id="newpopup-login">
    <div class="newpopup-promo">
     <div class="newpopup-promo-button">
      <i class="fas fa-lock">
      </i>
      <span>
       Log in
      </span>
     </div>
     <div class="newpopup-promo-button">
      <i class="fas fa-user">
      </i>
      <span>
       Register
      </span>
     </div>
     <div class="newpopup-promo-button">
      <i class="fas fa-question">
      </i>
      <span>
       Forgot my password
      </span>
     </div>
     <div class="newpopup-promo-button">
      <i class="fas fa-check">
      </i>
      <span>
       Verify my account
      </span>
     </div>
     <div class="newpopup-promo-button newpopup-noclick" onclick="window.open('/mkt/opentradingaccount')">
      <i class="fas fa-chart-line">
      </i>
      <span>
       Open A Trading Account
      </span>
     </div>
    </div>
    <form autocomplete="off" class="newpopup-form is-active" id="login-login" onsubmit="mbrlogin(); return false;">
     <input name="_csrf" type="hidden" value=""/>
     <div class="newpopup-group">
      <span class="newpopup-title">
       Log in
      </span>
     </div>
     <div class="newpopup-row newpopup-group">
      <button id="newpopup-login-fb" onclick="initFb()" type="button">
       <i aria-hidden="true" class="fab fa-facebook-f">
       </i>
       <br/>
       Facebook
      </button>
      <button id="newpopup-login-tw" onclick="initTw()" type="button">
       <i aria-hidden="true" class="fab fa-twitter">
       </i>
       <br/>
       Twitter
      </button>
      <button id="newpopup-login-gg" onclick="initGp()" type="button">
       <i aria-hidden="true" class="fab fa-google">
       </i>
       <br/>
       Google
      </button>
     </div>
     <div class="newpopup-group" style="text-align: center;">
      - OR -
     </div>
     <div name="errmsg">
     </div>
     <div data-content="" name="errmsg_login">
     </div>
     <div class="newpopup-group">
      <div>
       <input id="newpopup-login-email" name="newpopup-login-email" placeholder="Email Address" required="" style="font-size:1rem;" type="email"/>
      </div>
      <div>
       <input autocomplete="off" id="newpopup-login-pass" name="newpopup-login-pass" placeholder="Password" required="" style="font-size:1rem;" type="password"/>
      </div>
      <button class="newpopup-show" for="newpopup-login-pass" id="newpopup-login-show" onclick="ToggleHidePass('newpopup-login-pass')" type="button">
       <i class="fas fa-eye">
       </i>
       <i class="fas fa-eye-slash">
       </i>
      </button>
     </div>
     <div class="newpopup-group">
      <div class="registration_captcha">
       <div class="g-recaptcha" data-sitekey="6LdpVBAUAAAAAD-oGGzO4mfIX8t5QImpi4bk7U4N">
       </div>
      </div>
     </div>
     <div class="newpopup-group">
      <a class="newpopup-link" onclick="ChangeLogin(2)">
       Forgot your password?
      </a>
      <div name="btnlogin">
       <button type="submit" value="Log in">
        Log in
       </button>
      </div>
     </div>
    </form>
    <form autocomplete="off" class="newpopup-form" id="login-signup" onsubmit="mbrsignup(); return false;">
     <input name="tpl" type="hidden" value="register_signupauth"/>
     <input name="_csrf" type="hidden" value=""/>
     <div class="newpopup-group">
      <span class="newpopup-title">
       Register
      </span>
     </div>
     <div class="newpopup-row newpopup-group">
      <button onclick="initFb()" type="button">
       <i aria-hidden="true" class="fab fa-facebook-f" id="newpopup-register-fb">
       </i>
       <br/>
       Facebook
      </button>
      <button onclick="initTw()" type="button">
       <i aria-hidden="true" class="fab fa-twitter" id="newpopup-register-tw">
       </i>
       <br/>
       Twitter
      </button>
      <button onclick="initGp()" type="button">
       <i aria-hidden="true" class="fab fa-google" id="newpopup-register-gg">
       </i>
       <br/>
       Google
      </button>
     </div>
     <div class="newpopup-group" style="text-align: center;">
      - OR -
     </div>
     <div name="errmsg">
     </div>
     <div data-signup="" name="errmsg_signup">
     </div>
     <div class="newpopup-group">
      <div>
       <input id="newpopup-register-user" name="signup-username" placeholder="Display Name" required="" style="font-size:1rem;" type="text" value=""/>
      </div>
      <div>
       <input id="newpopup-register-email" name="signup-email" placeholder="Email Address" required="" style="font-size:1rem;" type="email" value=""/>
      </div>
      <div>
       <input autocomplete="off" id="newpopup-register-pass" name="signup-password" placeholder="Password" required="" style="font-size:1rem;" type="password"/>
      </div>
      <button class="newpopup-show" onclick="ToggleHidePass('signup-password')" type="button">
       <i class="fas fa-eye" id="newpopup-register-show">
       </i>
       <i class="fas fa-eye-slash">
       </i>
      </button>
     </div>
     <div class="newpopup-group newpopup-row">
      <input id="newpopup-register-marketing" name="signup-tickbox2" style="width: 100px" type="checkbox" value="1"/>
      <label for="newpopup-register-marketing" style="text-alileft;">
       Please send me marketing materials from Bursa Malaysia and/or its market participants and business partners.
      </label>
     </div>
     <div class="newpopup-group">
      <div class="registration_captcha">
       <div class="g-recaptcha" data-sitekey="6LdpVBAUAAAAAD-oGGzO4mfIX8t5QImpi4bk7U4N">
       </div>
      </div>
     </div>
     <div class="newpopup-group">
      <a class="newpopup-link" onclick="ChangeLogin(3)">
       Resend Verification Code
      </a>
      <div name="btnsignup">
       <button type="submit" value="Sign Up">
        Register
       </button>
      </div>
     </div>
    </form>
    <form autocomplete="off" class="newpopup-form" id="login-forgot" onsubmit="mbrforgot(); return false;">
     <input name="_csrf" type="hidden" value=""/>
     <div class="newpopup-group">
      <span class="newpopup-title">
       Forgot my password
      </span>
     </div>
     <div name="errmsg">
     </div>
     <div class="newpopup-group">
      Lost your password? Please enter your email address. You will receive a link to create a new password.
     </div>
     <div class="newpopup-group">
      <div>
       <input id="newpopup-forgot-email" name="forgot-email" placeholder="Email Address" required="" style="font-size:1rem;" type="email"/>
      </div>
     </div>
     <div class="newpopup-group">
      <div class="registration_captcha">
       <div class="g-recaptcha" data-sitekey="6LdpVBAUAAAAAD-oGGzO4mfIX8t5QImpi4bk7U4N">
       </div>
      </div>
     </div>
     <div class="newpopup-group">
      <div name="btnreset">
       <button type="submit" value="Reset Password">
        Reset Password
       </button>
      </div>
      <a class="newpopup-link" onclick="ChangeLogin(0)">
       Back to login
      </a>
     </div>
    </form>
    <form autocomplete="off" class="newpopup-form" id="login-resend">
     <div class="newpopup-group">
      <span class="newpopup-title">
       <span>
        RESEND
       </span>
       VERIFICATION EMAIL
      </span>
     </div>
     <div name="errmsg">
     </div>
     <div class="newpopup-group">
      An activation email will be sent to your email address.
     </div>
     <div class="newpopup-group">
      <div>
       <input id="email_resend" name="email" placeholder="Registered email address" required="" style="font-size:1rem;" type="email"/>
      </div>
     </div>
     <div class="newpopup-group">
      <div class="registration_captcha">
       <div class="g-recaptcha" data-sitekey="6LdpVBAUAAAAAD-oGGzO4mfIX8t5QImpi4bk7U4N">
       </div>
      </div>
     </div>
     <div class="newpopup-group">
      <div name="btnresend">
       <button onclick="submitResend()" type="submit">
        RESEND VERIFICATION EMAIL
       </button>
      </div>
      <a class="newpopup-link" onclick="ChangeLogin(0)">
       Back to login
      </a>
     </div>
    </form>
    <div id="newpopup-close" onclick="ShowLogin()">
     <i class="fas fa-times">
     </i>
    </div>
   </div>
  </div>
  <main>
   <div class="main stocks etbs innerpg wtabpg clearfix">
    <div class="content bgCheck">
     <section class="pgTitle clearfix">
      <div class="pgTitle_hld clearfix">
       <div class="titleHeader">
        <div class="titleHeader_text">
         Stocks
        </div>
       </div>
       <div class="pgTitle_extend">
       </div>
      </div>
     </section>
     <section class="stocksList section">
      <div class="timeStamp">
       Data Updated at 19 Jan 2024 - 18:45 PM
      </div>
      <div class="tb_listing stocks_tb_listing">
       <div class="title">
        <span>
         Stocks
        </span>
        Listing
       </div>
       <div class="tb_hld clearfix">
        <div class="tb_scroll">
         <div class="tb_scroll_hld">
          <div class="tb_row tb_label">
           <div cell-sort="asc" class="tb_cell tb_cashT" name="stockcode" onclick="callListAjax('stock_ajax', 'listing', 1, 'stockcode', 'yes');">
            <span>
             CASHTAG
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_name" name="name" onclick="callListAjax('stock_ajax', 'listing', 1, 'name', 'yes');">
            <span>
             NAME
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_price" name="last" onclick="callListAjax('stock_ajax', 'listing', 1, 'last', 'yes');">
            <span>
             PRICE
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_close" name="close" onclick="callListAjax('stock_ajax', 'listing', 1, 'close', 'yes');">
            <span>
             CLOSE
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_chg" name="netchange" onclick="callListAjax('stock_ajax', 'listing', 1, 'netchange', 'yes');">
            <span>
             CHG
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_pchg" name="percentchange" onclick="callListAjax('stock_ajax', 'listing', 1, 'percentchange', 'yes');">
            <span>
             %CHG
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_volume" name="volume" onclick="callListAjax('stock_ajax', 'listing', 1, 'volume', 'yes');">
            <span>
             VOLUME
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_high" name="high" onclick="callListAjax('stock_ajax', 'listing', 1, 'high', 'yes');">
            <span>
             HIGH
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_low" name="low" onclick="callListAjax('stock_ajax', 'listing', 1, 'low', 'yes');">
            <span>
             LOW
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_ar" name="bid" onclick="callListAjax('stock_ajax', 'listing', 1, 'bid', 'yes');">
            <span>
             BUY (QTY)
            </span>
           </div>
           <div cell-sort="asc" class="tb_cell tb_ai" name="ask" onclick="callListAjax('stock_ajax', 'listing', 1, 'ask', 'yes');">
            <span>
             SELL (QTY)
            </span>
           </div>
          </div>
          <span main-field="name" name="listing">
           <div class="tb_row tb_data">
            <div class="tb_cell tb_name">
             <div class="loader loaderSmall">
              <div class="loader_hld">
               <img alt="" src="/img/loading.gif"/>
              </div>
             </div>
            </div>
           </div>
          </span>
         </div>
        </div>
        <div class="tb_stick">
         <div class="tb_row tb_label">
         </div>
         <span name="listing_watch">
          <div class="tb_row tb_data" style="padding:16px 0;">
          </div>
         </span>
        </div>
        <div class="tb_stick">
         <div class="tb_row tb_label">
         </div>
         <span name="listing_detail">
          <div class="tb_row tb_data" style="padding:16px 0;">
          </div>
         </span>
        </div>
       </div>
       <div class="secEnd">
       </div>
      </div>
      <div class="pagination row">
       <div class="pagi_arrows small-5 column clearfix" name="listing_nav">
       </div>
       <div class="pagi_nums small-7 column clearfix">
        <div class="pagi_numsHld clearfix row">
         <div class="pagi_numsItem cntCopy" data-total="" name="listing_paging_total">
         </div>
         <div class="pagi_numsItem">
          <input name="listing_paging_keyin" type="text" value="0"/>
         </div>
         <div class="pagi_numsItem cntCopy">
          Page:
         </div>
        </div>
       </div>
      </div>
     </section>
     <section class="cnt2col section row">
      <div class="cnt2col_left small-12 medium-12 large-8 column">
       <section class="news section">
        <div class="sec_label">
         <span>
          News
         </span>
        </div>
        <div class="row news_cnt clearfix" name="pgnews">
         <br/>
         <div class="loader loaderSmall">
          <div class="loader_hld">
           <img alt="" src="/img/loading.gif"/>
          </div>
         </div>
         <br/>
         <br/>
        </div>
        <div class="secEnd_seeMore clearfix">
         <a href="/mkt/tools/news">
          <div class="btn_seeMore">
           See More News
          </div>
         </a>
        </div>
       </section>
      </div>
      <div class="cnt2col_right small-12 medium-12 large-4 column clearfix">
       <section class="sq_bnr section row">
        <div class="sq_bnr_item small-12 medium-6 large-12 column">
         <a href="https://goo.gl/rkzX9X" target="_new">
          <img alt="ad text" src="index.php?ch=banner&amp;pg=banner_stocks&amp;ac=41&amp;bb=image"/>
         </a>
        </div>
        <div class="sq_bnr_item small-12 medium-6 large-12 column">
         <a onclick="btnLogin('/mkt/mywatchlist')" target="">
          <img alt="ad text" src="index.php?ch=banner&amp;pg=banner_stocks&amp;ac=1&amp;bb=image"/>
         </a>
        </div>
       </section>
      </div>
     </section>
     <div id="newfoot-pre">
      All market data is provided by Refinitiv except for data on Malaysia indices, Warrants and Futures which is provided by Bursa Malaysia. Prices displayed on this website are delayed by 15 minutes.
     </div>
     <div id="newfoot">
      <div class="newfoot-top">
       <div class="newfoot-left">
        <a class="newfoot-links" href="/mkt/contactus" style="text-decoration:none;">
         Contact Us
        </a>
        <a class="newfoot-links" href="/mkt/personaldatanotice" style="text-decoration:none;">
         Personal Data Notice
        </a>
        <a class="newfoot-links" href="/mkt/termsandcondition" style="text-decoration:none;">
         Terms &amp; Conditions
        </a>
        <a class="newfoot-links" href="/mkt/trkdlegalnotice" style="text-decoration:none;">
         Refinitiv Legal Notice
        </a>
       </div>
       <div class="newfoot-pad">
       </div>
       <div class="newfoot-right">
        <div class="newfoot-followus">
         Follow us
        </div>
        <a class="newfoot-social" href="https://www.facebook.com/BursaMalaysia" rel="noopener noreferrer" target="_blank">
         <i class="fa fa-facebook">
         </i>
        </a>
        <a class="newfoot-social" href="https://twitter.com/BursaMalaysia" rel="noopener noreferrer" target="_blank">
         <i class="fa fa-twitter">
         </i>
        </a>
        <a class="newfoot-social" href="https://www.linkedin.com/company/bursamalaysia/" rel="noopener noreferrer" target="_blank">
         <i aria-hidden="true" class="fa fa-linkedin">
         </i>
        </a>
        <a class="newfoot-social" href="https://www.youtube.com/bursamalaysia" rel="noopener noreferrer" target="_blank">
         <i class="fa fa-youtube-play">
         </i>
        </a>
        <a class="newfoot-social" href="https://www.instagram.com/bursamalaysia/" rel="noopener noreferrer" target="_blank">
         <i class="fa fa-instagram">
         </i>
        </a>
       </div>
      </div>
      <div class="newfoot-bot">
       <div class="newfoot-left">
        <div class="newfoot-copyright">
         Copyright ©
         <script>
          document.write(new Date().getFullYear())
         </script>
         Bursa Malaysia Berhad 197601004668 (30632-P) . All rights reserved.
        </div>
        <div class="newfoot-copyright">
         Data Copyright ©
         <script>
          document.write(new Date().getFullYear())
         </script>
         , Refinitive. All rights reserved.
        </div>
       </div>
       <div class="newfoot-pad">
       </div>
       <div class="newfoot-right">
        <div class="newfoot-partner">
         <div class="newfoot-partner-title">
          Content Partners
         </div>
         <a href="https://www.refinitiv.com/en">
          <img alt="logo" class="newfoot-partner-logo" rel="noopener noreferrer" src="/assets/bmp/newnav/newnav-img/logo/refinitiv.svg" target="_blank"/>
         </a>
        </div>
        <div class="newfoot-partner">
         <div class="newfoot-partner-title">
         </div>
         <a href="https://www.bursamalaysia.com/">
          <img alt="logo" class="newfoot-partner-logo" rel="noopener noreferrer" src="/assets/bmp/newnav/newnav-img/logo/bmb-logo.png" target="_blank"/>
         </a>
        </div>
       </div>
      </div>
     </div>
     <span name="home_tickerindex">
     </span>
     <script src="/plugin/jsencrypt/bin/jsencrypt.min.js">
     </script>
     <script>
      //Open Submenu
  $(".newnav-left .newnav-item").click(function(event) {
    if ($(this).hasClass("is-active")) {
      NewNavHideAllSubMenu();
    } else { NewNavHideAllSubMenu();
      NewNavShowSubMenu($(this).index());
    }
    event.stopPropagation();
  });

  //Close submenu by fake clicking anywhere
  $(".newnav-sub-target").click(function() {    
    NewNavHideAllSubMenu();
  })

  //Search Click
  $("#newnav-search,#newnav-search-close,#newnav-mobileSearch").click(function() {
    ToggleActive(".newnav-search-container,#newnav-search,#newnav-mobileSearch")
    $("#search_suggestions").hide();
  });

  //Language Click
  $("#newnav-lang,#newnav-mobileLang").click(function() {
    ToggleActive(".newnav-lang-container,#newnav-lang,#newnav-mobileLang")
  });

  //Select Language
  $("#newnav-lang-en").click(function() {
    $("#newnav-lang").text("EN");

    //New added
    setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"setlang", lang:"en"})
        .done(function(data) {
            location.reload();
        });
    }, 1000);
  })

  $("#newnav-lang-bm").click(function() {
    $("#newnav-lang").text("BM");

    //New added
    setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"setlang", lang:"bm"})
        .done(function(data) {
            location.reload();
        });
    }, 1000);
  })

  $("#newnav-lang-ch").click(function() {
    $("#newnav-lang").text("CH");
  })

  //Shariah Click
  function ToggleShariahText(index) {

    if ($(index).hasClass("is-active")) {

      $(index).html("<i class='fas fa-moon'></i>");

      setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"shariahstatus", status:"on"})
        .done(function(data) {
            location.reload();
        });
      }, 1000);
    } else { $(index).html("<i class='fas fa-moon'></i>");

      setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"shariahstatus", status:"off"})
        .done(function(data) {
            location.reload();
        });
      }, 1000);
    }
  }

  function ToggleShariahMobile(index) {

    if ($(index).hasClass("is-active")) {

      setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"shariahstatus", status:"on"})
        .done(function(data) {
            location.reload();
        });
      }, 1000);
    } else { setTimeout(function() {
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"shariahstatus", status:"off"})
        .done(function(data) {
            location.reload();
        });
      }, 1000);
    }
  }

  function selectShariah(mode, memberid){

    $.ajax({
        url: '/index.php',
        data: {tpl: 'home_ajax', type: 'shariahMode', mode: mode, memberid: memberid},
        dataType: 'html',
        type: 'GET',
    }); 
  }

  //Hamburger Click
  $("#newnav-hamburger").click(function() {
    ToggleActive(".newnav-left,#newnav-hamburger")
  });

  //Hamburger Click
  $("#newnav-dot").click(function() {
    ToggleActive(".newnav-subsite-background,#newnav-dot")
  });

  //Repeated Functions
  function NewNavShowSubMenu(index) {
    $(".newnav-item:nth-child(" + (index + 1) + ")").addClass("is-active");
    $(".newnav-sub-container:nth-child(" + (index + 1) + ")").addClass("is-active");
    $(".newnav-sub-target").addClass("is-active");
  }

  function NewNavHideAllSubMenu() {
    $(".newnav-item").removeClass("is-active");
    $(".newnav-sub-container").removeClass("is-active");
    $(".newnav-sub-target").removeClass("is-active");
  }

  function ToggleActive(query) {
    $(query).toggleClass("is-active");
  }

  //Popup Functions
  //Show password
  $(".newpopup-show").click(function() {
    ToggleActive(this);
    var target = "#" + $(this).attr("for");
    if ($(this).hasClass("is-active")) {
    $(target).attr("type","text");
    } else { $(target).attr("type","password");
    }
  })

  $("#newpopup-blackout").click(function() {
    ToggleActive("#newpopup")
  });

  function ShowLogin() {
    ToggleActive("#newpopup");
  }

  function ChangeLogin(index) {   
    $('.newpopup-promo-button').removeClass("is-active"); 

    $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html(''); // add new removeClass('errmsg') to clear errmsg
    
    $('.newpopup-promo-button:nth-child(' + (index + 1) + ')').addClass("is-active");

    $(".newpopup-form").removeClass("is-active");
    $(".newpopup-form:nth-child(" + (index +2) + ")").addClass("is-active");

    getCSRF('login-login');  //new added 
    getCSRF('login-forgot');  //new added
    getCSRF('login-signup');  //new added
    getCSRF('login-resend');  //new added
  }

  $(".newpopup-promo-button:not(.newpopup-noclick)").click(function() {
    var index = $(this).index();
    ChangeLogin(index);
  });


  //----------------------------------------------- NEW ADDED -------------------------------------------------

    
function ToggleActivate(query) {    
  var element = document.getElementById(query);
  element.classList.toggle("activated");
}

function Focus(query) {            
    $('#'+query).addClass("activated");
    $('#'+query).focus();
  clearErrMsg();
}

function Unfocus() {
    $('#newnav-search-input').removeClass("activated");
    lookout();
}


/* global setting to cancel previous request */
var jqxhr = {abort: function () {}};

function lookupSearch(inputString) {

  /* proceed only if key-in alphanumeric */
  if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
  } else { var regex = new RegExp("^[a-zA-Z0-9\b]+$");
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  }

  if(inputString.length <= 1) {
    $('[name="search_suggestions"]').removeClass('newnav-searchresult-container').fadeOut().html('');
  } 
  else if(inputString.length >= 2) {

    jqxhr.abort(); /* cancel previous request if input string still coming */
    jqxhr = $.ajax({
      url: '/index.php?tpl=v4_headerfooter_search_ajax',
      type: 'POST',
      data: {tpl: 'v4_headerfooter_search_ajax', type: 'searchresult', string: encodeURIComponent(inputString), _token: 'WnpRRkEwWlhGalpVUTFPUXNVaW9xYmxnRnlpZDV5U1UrNm8yNlZZYTNCSzl2OTEvSkhjSjlaTWRJY001TkNnYg=='},
      dataType: 'json',          
      success: function(data) {  
        if(data.status == 'success') {

          var records = data.records;    
          var totalrows =  records.length -1;

          var html = '';

          html += '<div id="searchpopbox" class="searchpopbox" style="background-color:#f1f1f1;">';
          html += '<table id="myTable" class="table child-div" style="height:165px; width:100%; margin:0px;">';
          html += '<tbody>';

          for (var i = 0; i < totalrows; i++) {
            html += '<tr style="background-color:#f1f1f1;">';
            //html += '<td>'+i+'</td>';
            html += '<td style="padding:2px; border-top:1px solid #dee2e6; padding:5px 0px;">'+records[i]+'</td>';         
            html += '</tr>';
          }

          html += '</tbody></table>'; 
          html += '</div>';

          $('[name="search_suggestions"]').addClass('newnav-searchresult-container').fadeIn().html(html);
        }
      }
    });
  }        
}


function lookout() {
  $('[name="search_suggestions"]').removeClass('searchresult').fadeOut().html('');
  $('[name="newnav-search-input"]').val('');
}    

function ToggleHidePass(name) {
  var x = document.querySelector('input[name="'+name+'"]');
  if (x.type === "password") {
    x.type = "text";
  } else { x.type = "password";
  }
}

function LoginChange(mode) {    
  var but_login = document.getElementById('login-button-login');
  var but_signup = document.getElementById('login-button-signup');
  var but_forgot = document.getElementById('login-button-forgot');
  var but_back = document.getElementById('login-button-back');

  but_login.classList.remove("activated");
  but_signup.classList.remove("activated");
  but_forgot.classList.remove("activated");
  but_back.classList.remove("activated");
  
  var login = document.getElementById('login-login');
  var signup = document.getElementById('login-signup');
  var forgot = document.getElementById('login-forgot');
  login.classList.remove("activated");
  signup.classList.remove("activated");
  forgot.classList.remove("activated");
  
  if (mode === 1) {
    login.classList.add("activated");
    but_login.classList.add("activated");
    but_forgot.classList.add("activated");
    getCSRF('login-login');
  } 
  else if (mode===2) {
    signup.classList.add("activated");
    but_signup.classList.add("activated");
  } 
  else if (mode===3) {
    forgot.classList.add("activated");
    but_login.classList.add("activated");
    but_back.classList.add("activated");
    getCSRF('login-forgot');
  }
  clearErrMsg();
} 

function ToggleMobileMenu(dom) {
  dom.classList.toggle("activated");
  if (dom.classList.contains("activated")) {
    var x = dom.firstElementChild.childElementCount
    x = x*44;
    dom.firstElementChild.style.height= x.toString() + 'px';
  } else { dom.firstElementChild.style.height= '0px';
  }
}

function getCSRF(mode) {
  $.ajax({
    url: '/index.php?tpl=register_getcsrf',
    data: { tpl: 'register_getcsrf' },
    type: 'POST',
    dataType: 'json',
    success: function(data) {
      $('#'+mode+' > [name="_csrf"]').val(data.code);
    }
  });
}

function clearErrMsg() {
  $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html('');
  $("[name='_csrf']").val('');
  $("[name='newpopup-login-email']").val('');
  $("[name='newpopup-login-pass']").val('');
  $("[name='login-username']").val('');
  $("[name='tickbox2']").val('');
}

/*
function crypt(str, name) {
  var keystr = $("[name='"+name+"']").attr('data-key');
  var ivstr = $("[name='"+name+"']").attr('data-iv');

  encrypted = CryptoJS.AES.encrypt(JSON.stringify(str), ivstr, {format: CryptoJSAesJson}).toString();
  return encrypted;
}
*/

function getCert(csrf) {
  return new Promise((resolve, reject) => {        
    $.ajax({
      url: '/index.php',
      data: { tpl: 'register_ajax', type: 'cert', csrf: csrf,  },
      type: 'GET',
      dataType: 'json',
      success: function(data) { 
        resolve(data);
      }
    });
  });
}

async function mbrlogin() {  
  $('[name="btnlogin"]').html('<button type="text"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Loading..</button>');
  $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html('');
  $("[name='errmsg_login']").removeClass('errmsg').removeClass('sucmsg').html('');

  var email = document.getElementsByName("newpopup-login-email")[0].value;
  var csrf = $('#login-login > [name="_csrf"]').val();
  var token = grecaptcha.getResponse(0);

  var public_key = await getCert(csrf);
  var encrypt = new JSEncrypt();
  encrypt.setPublicKey(public_key);
  var password = encrypt.encrypt(document.getElementsByName("newpopup-login-pass")[0].value);

  $.ajax({
    url: '/index.php?tpl=register_loginauth',
    data: { tpl: 'register_loginauth', email: email, password: password, csrf: csrf, token: token },
    type: 'POST',
    dataType: 'json',
    success: function(data) { 
      if(data.status == 'error') {
        $('[name="btnlogin"]').html('<button type="submit" value="Log in">Login</button>');
        $("[name='errmsg']").addClass('errmsg').html(data.msg);
      }
      if(data.status == 'success') {
        $('[name="btnlogin"]').html('');
        $("[name='errmsg']").addClass('sucmsg').html(data.msg);
        checkLoginSess();
      }
      grecaptcha.reset(0);
    }
  });
}

async function mbrsignup() {

  $('[name="btnsignup"]').html('<button type="text"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Loading..</button>');
  $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html('');    
  $("[name='errmsg_signup']").removeClass('errmsg').removeClass('sucmsg').html('');

  var username = document.getElementsByName("signup-username")[0].value;
  var email = document.getElementsByName("signup-email")[0].value;
  var tickbox = document.getElementsByName("signup-tickbox2")[0].value;
  var token = grecaptcha.getResponse(1);
  var csrf = $('#login-signup > [name="_csrf"]').val();

  var signupid = '';
  var signuptype = '';
  if($('[name="signup-id"]').length > 0) {
    signupid = document.getElementsByName("signup-id")[0].value;
    signuptype = document.getElementsByName("signup-type")[0].value;
  }

  var public_key = await getCert(csrf);
  var encrypt = new JSEncrypt();
  encrypt.setPublicKey(public_key);
  var password = encrypt.encrypt(document.getElementsByName("signup-password")[0].value);

  $.ajax({ 
    url: '/index.php?tpl=register_signupauth',
    data: { 
      tpl: 'register_signupauth', 
      'signup-username': username, 
      'signup-email': email, 
      'signup-password': password, 
      'signup-tickbox2': tickbox, 
      'signup-type': signuptype, 
      'signup-id': signupid, 
      csrf: csrf, 
      'g-recaptcha-response': token 
    },
    type: 'POST',
    dataType: 'json',
    success: function(data) {   
      if(data.status == 'error') {
        $('[name="btnsignup"]').html('<button type="submit" value="Sign Up">Register</button>');
        $("[name='errmsg']").addClass('errmsg').html(data.msg);  
      }
      if(data.status == 'success') {         
        $('[name="btnsignup"]').html('');
        $("[name='errmsg']").addClass('sucmsg').html(data.msg);
        window.location = '/mkt/registersuccess';
      }
      grecaptcha.reset(1);
    }
  });
}

function mbrforgot() {
  $('[name="btnreset"]').html('<button type="text"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Loading..</button>');
  $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html('');  

  var email = document.getElementsByName("forgot-email")[0].value;
  var csrf = $('#login-forgot > [name="_csrf"]').val();
  var token = grecaptcha.getResponse(2);

  $.ajax({
    url: '/index.php?tpl=register_forgotpasswd',
    data: { tpl: 'register_forgotpasswd', email: email, csrf: csrf, token: token },
    type: 'POST',
    dataType: 'json',
    success: function(data) {
      if(data.status == 'error') {
        $('[name="btnreset"]').html('<button type="submit" value="Reset Password">Reset Password</button>');
        $("[name='errmsg']").addClass('errmsg').html(data.msg);
      }
      if(data.status == 'success') {         
        $('[name="btnreset"]').html('');
        $("[name='errmsg']").addClass('errmsg').html(data.msg);
      }
      grecaptcha.reset(2);
    }
  });
}

function submitResend() {
  $("[name='errmsg']").removeClass('errmsg').removeClass('sucmsg').html('');  

  for (const el of document.getElementById('login-resend').querySelectorAll("[required]")) {
    if (!el.reportValidity()) {
      return;
    }
  }

  $('[name="btnresend"]').html('<button type="text"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> Loading..</button>'); 

  var email = $("#email_resend").val(); 
  var token = grecaptcha.getResponse(3); 

  $.ajax({
    url: '/index.php',
    data: {tpl: 'register_ajax', type: 'resend',email: email, token: token},
    dataType: 'html',
    type: 'GET',
    success: function(data) { 
      if(data == "noerror") jsRedirect("/mkt/resendsuccess");
      else {
        $('[name="btnresend"]').html('<button type="submit" onclick="submitResend()">RESEND VERIFICATION EMAIL</button>');
        $("[name='errmsg']").addClass('errmsg').html(data);
      }
      grecaptcha.reset(3);
    }
  });
} 
  
if($("[name='errmsg_signup']").attr('data-signup') == '1') {
  $("[name='errmsg_signup']").addClass('errmsg').html('Please Sign Up to continue.');
}

if($("[name='errmsg_login']").attr('data-content') != '') {
  var $content = $("[name='errmsg_login']").attr('data-content');
  $("[name='errmsg_login']").addClass('errmsg').html($content);
}
     </script>
    </div>
   </div>
  </main>
  <script src="/js/vendor/what-input.js">
  </script>
  <script src="/js/vendor/foundation.js">
  </script>
  <script src="/js/custom.js">
  </script>
  <script src="/plugin/tipso/tipso.js">
  </script>
  <script src="/js/collapsible.js">
  </script>
  <script src="/js/background-check.min.js">
  </script>
  <script>
   $(document).foundation();
    $('.tipso').tipso({
      background: '#000000',
      width: 400,
      position: 'bottom',
      size: 'default',
      tooltipHover: true,
    });
  </script>
  <script src="/plugin/highchart/highstock.js">
  </script>
  <script>
   function toBeginner() {
    var $container = $("html,body");
    var $scrollTo = $('.home_getStart');
    $container.animate({scrollTop: $scrollTo.offset().top - $container.offset().top + $container.scrollTop(), scrollLeft: 0},300);
}

if (!String.prototype.startsWith) {
    String.prototype.startsWith = function(searchString, position) {
        position = position || 0;
        return this.indexOf(searchString, position) === position;
    };
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

$(document).ready(function() {
    var popupToAdd = '';
    if(popupToAdd == 'yes') {
        setTimeout(function() {
            $('[data-open="generaladdtowatchlistmodel"]').trigger('click');
        }, 5000)
    }
});
    
function noLangVersion(){
    $('[data-open="popup_nolangversion"]').trigger('click');
}
    
function jsRedirect(link){
    if(link.includes('/mkt/') == false) {
        link = '/index.php';
    }
    window.location.href = link;
}

function callAjax(page, type){
    $.ajax({
        url: '/index.php',
        data: {tpl: page, type: type},
        dataType: 'html',
        success: function(data) {
            eval($("[name='"+type+"']").html(data));
        },
        type: 'GET'
    });
}

function delSessSocialMedia(){
    $.ajax({
        url: '/index.php',
        data: {tpl: "home_ajax", type: "delsesssocialmedia"},
        dataType: 'html',
        success: function(data) {},
        type: 'GET'
    });
}

function callSection(page){
    return $.ajax({
        url: '/index.php',
        data: {tpl: page},
        dataType: 'html',
        success: function(data) {
            eval($("[name='"+page+"']").html(data));
        },
        type: 'GET'
    });
}

function stealDataWithCode(page, type, code){
    $.ajax({
        url: '/index.php',
        data: {tpl: page, type: type, code: code},
        dataType: 'html',
        success: function(data) {
            eval($("[name='"+type+"']").html(data));
        },
        type: 'GET'
    });
}

function checkLoginSess(){
    setInterval(function() {
        $.ajax({
            url: '/index.php?tpl=th001_login_chksess.tsl',
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                if(data.status == "Yes") window.location.reload();
                else if(data.status == "Redirect") window.location.href = data.link;
                else if(data.status == "clickTrade") window.location.href = data.link;
            }
        });
    }, 5000);
}

function btnLogin(page){
    $('#btn_login').trigger('click');
    $.ajax({
        url: '/index.php',
        data: {tpl: 'home_ajax', type: 'trackpage', page: page},
        dataType: 'html',
        type: 'GET'
    });
}
  
function click2trade(type,status,pop) {
    if(status == '') {
        if(pop == 'form'){
            $.ajax({
                url: '/index.php',
                data: {tpl: 'home_ajax', type: 'click2trade'},
                dataType: 'html',
                type: 'GET'
            });

            window.location.href = 'mkt/register';
        } else { $(".loginPanel").fadeIn("fast");
            $(".login_cnt").animate({
                marginTop: 0
            });

            $.ajax({
                url: '/index.php',
                data: {tpl: 'home_ajax', type: 'click2trade'},
                dataType: 'html',
                type: 'GET'
            });
        }
        checkLoginSess();
    } else if(status == 'login') {

        if(type.startsWith('/mkt') == false) {
            return false;
        }
        
        $.ajax({
            url: '/index.php',
            data: {tpl: 'home_ajax', type: 'click2trade'},
            dataType: 'html',
            type: 'GET',
            success: function(data) {
                window.location.href = type;
            }
        });
    }
}

/* 
 [start]
 - capture shariah status from button and create shariah session
 */
$("#shariahMode").click(function () {
    var mode = $("#shariahMode").is(":checked");
    if(mode == true) status = "on";
    else if(mode == false) status = "off";
    $.ajax({
        url: '/index.php',
        data: {tpl: 'home_ajax', type: 'shariahstatus', status: status},
        dataType: 'html',
        success: function(data) {
            var link = window.location.href;
            if(link.includes('bursamarketplace.com') == false) {
                link = '/index.php';
            }
            window.location = link;
        },
        type: 'GET'
    });
});
/* [end] */

/* 
 [start]
 - fb login/register
 */
function initFb() {

    /* temporary disable */
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            $.ajax({
                url: '/index.php',
                data: {tpl: 'login_ajax', type: 'fbregister', code:response.authResponse.signedRequest, at:response.authResponse.accessToken},
                dataType: 'json',
                success: function(data) {
                    if(data.result == "register") {
                        window.location.hash = "#register";
                        location.reload();
                    }
                    else if(data.result == "noerror")  {
                        if (data.redirect !== '') window.location = data.redirect;
                        else window.location = window.location.href;
                    }
                },
                type: 'GET'
            });
        } else { FB.login(function(response) {
                initFb();
            }, {scope: 'public_profile,email'});
        }
    });
}
    
window.fbAsyncInit = function() {
    FB.init({
        appId      : '739477903760009',
        cookie     : true,
        xfbml      : true,
        version    : 'v13.0',
    });
    FB.AppEvents.logPageView();   
};

(function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

/* [end] */

/* 
 [start]
 - google login/register
 */
function initGp() {
    $('[name="fbnotify"]').hide();

    $(".loaderFull").css("display", "block");

    var url = "https://www.bursamarketplace.com/index.php?tpl=register_ajax&type=gpregister";
    var title = "title";
    var w = 500;
    var h = 500;

    var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;
    var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;

    var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
    var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;

    var left = ((width / 2) - (w / 2)) + dualScreenLeft;
    var top = ((height / 2) - (h / 2)) + dualScreenTop;
    var newWindow = window.open(url, title, 'location=no, scrollbars=yes, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);

    if (window.focus) newWindow.focus();
}
/* [end] */

/* 
 [start]
 - google login/register
 */
function initTw() {
    $('[name="fbnotify"]').hide();

    $(".loaderFull").css("display", "block");
    
    var url = "https://www.bursamarketplace.com/t/register_twitter";
    var title = "title";
    var w = 500;
    var h = 500;

    var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;
    var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;

    var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;
    var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;

    var left = ((width / 2) - (w / 2)) + dualScreenLeft;
    var top = ((height / 2) - (h / 2)) + dualScreenTop;
    var newWindow = window.open(url, title, 'location=no, scrollbars=yes, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);

    if (window.focus) newWindow.focus();
}
/* [end] */

function redirectPage(url) {
    if (url.includes('/mkt') == true) {
        window.location = url;
    } else { window.location.href = url;
        var $hashval = window.location.hash.substr(1);
        if($hashval == 'register' || $hashval == 'login') {
            window.location.reload();
        }
    }
}

function toggleShariah(val){
    var memberid = "";
    var checkShariah = val.checked;

    if(checkShariah == false) var mode = 0;
    else var mode = 1;

    $.ajax({
        url: '/index.php',
        data: {tpl: 'home_ajax', type: 'shariahMode', mode: mode, memberid: memberid},
        dataType: 'html',
        type: 'GET'
    });
}

function popupWindow(url, title, w, h) {
    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);
    return window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
}

$('body').on('click', '.socialBunch .btn_share', function() {
    var $this = $(this);
    var currentUrl = window.location.href;

    var content = $this.attr("data-content");
    if(content == undefined) var content = "";

    var link = $this.attr("data-link");
    if(link == undefined) var link = currentUrl;

    if(link.includes('bursamarketplace.com/mkt') == false) {
        return false;
    }
    
    var popupWidth = 626;
    var popupHeight = 436;

    if ($this.hasClass('btn_FB_share')) popupWindow('http://www.facebook.com/share.php?u='+link, 'facebook-share-dialog', popupWidth, popupHeight);
    else if ($this.hasClass('btn_TW_share')) popupWindow('https://twitter.com/intent/tweet?text='+content+'&url='+link, 'twitter-tweet-dialog', popupWidth, popupHeight);
    else if ($this.hasClass('btn_G_share')) popupWindow('https://plus.google.com/share?text='+content+' '+link+'&url='+link, 'gplus-share-dialog', popupWidth, popupHeight);
    else if ($this.hasClass('btn_IN_share')) popupWindow('https://www.linkedin.com/shareArticle?mini=true&title='+content+' '+link+'&url='+link, 'instagram-share-dialog', popupWidth, popupHeight);
});

function createSessionForWatchlistAdd(stockcode,stockname,page) {
    return false
}

function createSessionForFuturesAdd(futurescode,futuresname,page) {
    $.ajax({
        url: '/index.php',
        data: {tpl: 'futures_ajax', type: 'addFuturesAfterLogin', futurescode: futurescode, futuresname: futuresname},
        dataType: 'html',
        success: function(data) {
            if(data == "noerror")
            {
                btnLogin(page);
            }
        },
        type: 'GET'
    });
}

function getBrowser(){
    var ua = navigator.userAgent, tem, M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || []; 
    if (/trident/i.test(M[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || []; 
        return 'IE '+ (tem[1] || '');
    }   
    if (M[1] === 'Chrome') {
        tem = ua.match(/\bOPR\/(\d+)/);
        if (tem!=null) { return 'Opera ' + tem[1]; }
    }   
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) != null) { M.splice(1, 1, tem[1]); }
    return M[0];
}

function getBrowserVersion(){
    var ua = navigator.userAgent, tem, M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];                                                                                                                         
    if (/trident/i.test(M[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return 'IE ' + (tem[1] || '');
    }
    if (M[1] === 'Chrome') {
        tem = ua.match(/\bOPR\/(\d+)/);
        if (tem!=null) { return 'Opera ' + tem[1]; }
    }   
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) != null) { M.splice(1, 1, tem[1]); }
    return M[1];
}

function openResend() {
    ChangeLogin(3);
}

/* [language] language toggle */
$("[name='picklang']").click(function(event) {
    var $lang = $(this).attr("data-lang");
    setTimeout(function() {
        event.preventDefault();
        $.get("/t/home_ajax", {tpl:"home_ajax", type:"setlang", lang:$lang})
        .done(function(data) {
            location.reload();
        });
    }, 1000);
}); 

/* auto popup login/register */
var $hashval = window.location.hash.substr(1);
if($hashval == 'register') {
    btnLogin('/');
    ShowLogin();
    ChangeLogin(1);
}
else if($hashval == 'login') {
    btnLogin('/');
    ShowLogin();
    ChangeLogin(0);
}
else if($hashval == 'forgot') {
    btnLogin('/');
    ShowLogin();
    ChangeLogin(2);
}
else if($hashval == 'resend') {
    btnLogin('/');
    ShowLogin();
    ChangeLogin(3);
}
  </script>
  <script>
   /* newticket: function to switch UI to new */
$('#newui').click(function() {
    $.ajax({
        url: '/index.php',
        type: 'POST',
        data: {tpl: 'newstock_ajax', type: 'switchui', ui: 'new', _token: 'WnpRRkEwWlhGalpVUTFPUXNVaW9xYmxnRnlpZDV5U1UrNm8yNlZZYTNCSzl2OTEvSkhjSjlaTWRJY001TkNnYg=='},
        dataType: 'json',
        success: function(data) {
            if(data.status == 'success') {
                location.reload();
            }
        }
    });
});
    
$("[name='listing_paging_keyin']").keypress(function(e) {
    if (e.which == 13) {
        var actual_total_page = $("[name='listing_paging_total']").attr("data-total");
        var pagenum = $("[name='listing_paging_keyin']").val();
        var mainfield = $("[name='listing']").attr("main-field");
        if($.isNumeric(pagenum) == false) pagenum = 1;
        if(parseInt(pagenum) > actual_total_page) {
            $("[name='listing_paging_keyin']").val(actual_total_page);
            pagenum = actual_total_page;
        }
        else if(pagenum <= 0) {
            $("[name='listing_paging_keyin']").val(1);
            pagenum = 1;
        }
        callListAjax('stock_ajax', 'listing', pagenum, mainfield, 'no');
    }
});

function stockTrack(type, ric) {
   $.ajax({
        url: '/index.php',
        data: {tpl: "stock_ajax", type: "stocktrack", r: ric, f: type},
        dataType: 'json',
        type: 'GET'
    });
}

function stockNewsTrack(type, code) {
   $.ajax({
        url: '/index.php',
        data: {tpl: "news_ajax", type: "newstrack", s: code, f: type},
        dataType: 'json',
        type: 'GET'
    });
}

function callListAjax(page, type, pagenum, sfield, chgsort) {

    /* midcap filter */
    var midcap = 0;
    var midcap_curr = $("[name='midcap_status']").val();
    if(page == "stock_ajax" && type == "listing") {
        var result = $("[name='midcap_on']").hasClass("selected");
        if(result == true) midcap = 1;
    }

    /* prepare to get column pick and sorting */
    var mainfield = $("[name='"+type+"']").attr("main-field");
    if(sfield != "") {
        var cellsort = $("[name='"+sfield+"']").attr("cell-sort");

        if(chgsort == 'yes') {
            var cellsort = $("[name='"+sfield+"']").attr("cell-sort");
            if(cellsort == "desc") cellsort = "asc";
            else if(cellsort == "asc") cellsort = "desc";
            $("[name='"+sfield+"']").attr("cell-sort", cellsort);
        }

        if(sfield != mainfield) {
            $("[name='"+type+"']").attr("main-field",sfield);
            mainfield = sfield;
        }
    }

    /* auto reset all other column */
    var stype = cellsort;
    var arrFields = ["stockcode","name","last","close","netchange","percentchange","volume","high","low","bid","ask"];
    $.each(arrFields, function(key, arrField) {
        if(arrField != mainfield) {
            $("[name='"+arrField+"']").attr("cell-sort","desc");
            $("[name='"+arrField+"'] span").addClass("active");
        }
    });

    $.ajax({
        url: '/index.php',
        data: {tpl: page, type: type, pagenum: pagenum, sfield: sfield, stype: stype, midcap: midcap},
        dataType: 'json',
        success: function(data) {

            /* prepare data listing with add watchlist and more detail */
            var listing = "";
            var listing_watch = "";
            var listing_detail = "";
            var listing_nav = "";
            var listing_paging = "";

            $.each(data.records, function(index, element) {
                var updown = "txt_nochg";
                var stockcode = element.stockcode;
                var stcodeWithoutDotKL  = stockcode.replace('.KL', '');
                var stocknameAdd = element.name;
                stocknameAdd = stocknameAdd.replace(/'/g, "\\'");
                
                if(element.percentchange > 0) updown = "txt_up";
                else if(element.percentchange < 0) updown = "txt_down";

                listing += '<div class="tb_row tb_data"><div class="tb_cell tb_cashT"><a href="/mkt/themarket/stock/'+stcodeWithoutDotKL+'">'+element.cashtag+'</a></div><div class="tb_cell tb_name"><a href="/mkt/themarket/stock/'+stcodeWithoutDotKL+'">'+element.name+'</a></div><div class="tb_cell tb_price">'+element.last+'</div><div class="tb_cell tb_close">'+element.close+'</div><div class="tb_cell tb_chg '+updown+'">'+element.netchange+'</div><div class="tb_cell tb_pchg '+updown+'">'+element.percentchange+'%</div><div class="tb_cell tb_volume">'+element.volume+'</div><div class="tb_cell tb_high">'+element.high+'</div><div class="tb_cell tb_low">'+element.low+'</div><div class="tb_cell tb_buy">'+element.bid+' ('+element.bidsize+')</div><div class="tb_cell tb_sell">'+element.ask+' ('+element.asksize+')</div></div>';

                                    listing_watch += '<div class="tb_row tb_data">&nbsp;<div class="tb_watchBTN" onclick="btnLogin(\'/mkt/themarket/stock\');ShowLogin();ChangeLogin(0);"></div></div>'; 
                
                listing_detail += '<div class="tb_row tb_data tb_detailBTN" onclick="jsRedirect(\'/mkt/themarket/stock/'+stcodeWithoutDotKL+'\')">&nbsp;</div>';
            });

            $("[name='"+type+"']").html(listing);
            $("[name='"+type+"_watch']").html(listing_watch);
            $("[name='"+type+"_detail']").html(listing_detail);

            /* prepare for navigation */
            var prevpage = data.prevpage;
            var nextpage = data.nextpage;
            var currpage = data.currpage;
            var totalpage = data.totalpage;
            if(prevpage != 0) listing_nav += '<div class="roundBTN btn_arrow_left" onclick="callListAjax(\''+page+'\',\''+type+'\','+prevpage+', \''+sfield+'\', \'no\');"></div>';
            if(currpage != totalpage) listing_nav += '<div class="roundBTN btn_arrow_right" onclick="callListAjax(\''+page+'\',\''+type+'\','+nextpage+', \''+sfield+'\', \'no\');"></div>';
            $("[name='"+type+"_nav']").html(listing_nav);
            $("[name='"+type+"_paging_keyin']").val(currpage);

            /* prepare for pagination */
            $("[name='"+type+"_paging_total']").html("/ "+totalpage);
            $("[name='"+type+"_paging_total']").attr("data-total", totalpage);
        },
        type: 'GET'
    });
}

function getStockChart(period) {
    
    code = '';

    $('[name="chart-btn-1D"]').removeClass("chart-active");
    $('[name="chart-btn-3M"]').removeClass("chart-active");
    $('[name="chart-btn-1Y"]').removeClass("chart-active");
    $("[name='chart-btn-"+period+"']").addClass("chart-active");

    Highcharts.setOptions({ global: { useUTC: false } });
    var chart = Highcharts.stockChart('chart_stock', {
        rangeSelector: { enabled: false },
        yAxis : { labels:{ align:'right', x:-10 }, lineWidth : 1, offset : 50 },
        plotOptions: { series: {color: 'rgb(218, 10, 19)'} },
        credits: { enabled: false },
        navigator: { enabled: false },
        scrollbar: { enabled: false },
        series: [{ name: 'Price', marker: { enabled: true, radius: 1 }, shadow: true, tooltip: { valueDecimals: 2 } }]
    });
    var chart = $('#chart_stock').highcharts();
    
    $('#chart_stock').css('overflow', 'visible').css('height', '400px');
    chart.showLoading('<div class="loader loaderSmall"><div class="loader_hld"><img src="/img/loading.gif" /></div></div>');
    $.getJSON('/index.php?tpl=stock_ajax&type=gethistory&code='+code+'&period='+period+'&_token='+'WnpRRkEwWlhGalpVUTFPUXNVaW9xYmxnRnlpZDV5U1UrNm8yNlZZYTNCSzl2OTEvSkhjSjlaTWRJY001TkNnYg==', function(data) {
        chart.series[0].setData(data);
        chart.hideLoading();
        if(data == "") chart.showLoading('No data to display');
    });
}

function StockNews(type, code) {
    $.ajax({
        url: '/index.php',
        type: 'GET',
        data: {tpl: 'news_ajax', type: type, code: code, fintype: 'stock'},
        dataType: 'html',
        success: function(data) {
            $("[name='"+type+"']").html(data);
        }
    });
}

function csrNews(code) {
    $.ajax({
        url: '/index.php',
        data: {tpl: "stock_ajax", type: "csrNews", code: code},
        dataType: 'json',
        success: function(data) {
            $('[name="csrnews"]').html(data.html);
        },
        type: 'GET'
    });
}


    function togMicap(val) {
        var midcap_val;
        if(val == 1) {
            $("[name='midcap_on']").addClass("selected");
            $("[name='midcap_off']").removeClass("selected");
            midcap_val = 1;
        } else { $("[name='midcap_off']").addClass("selected");
            $("[name='midcap_on']").removeClass("selected");
            midcap_val = 0;
        }

        callListAjax("stock_ajax", "listing", 1, "name", "no");
        $("[name='midcap_status']").val(midcap_val);
    }

    $(document).ready(function() {

        callListAjax("stock_ajax", "listing", 1, "name", "no");
        callAjax("gurus_ajax", "gurusstock");
        StockNews("pgnews", "all");
    });
  </script>
  <script crossorigin="anonymous" data-cf-beacon='{"rayId":"848d000d1dc83fdc","b":1,"version":"2024.1.0","token":"5438863ed15449b281518ae9adaf5fd2"}' defer="" integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==" src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317">
  </script>
 </body>
</html>
